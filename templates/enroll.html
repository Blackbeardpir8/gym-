{% extends 'base.html' %}

{% block title %}
Enroll
{% endblock title %}

{% block head %}
<h1>Enroll with Us</h1>

<div class="container mt-5 enroll-form-container">
    <div class="row">
        <div class="col-md-12">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}

            <!-- Enrollment Form -->
            <form action="/enroll" method="post" class="php-email-form" data-aos="fade-up" data-aos-delay="200">
                {% csrf_token %}

                <div class="row gy-4">
                    <!-- Full Name -->
                    <div class="col-md-12 mb-3">
                        <input type="text" class="form-control" name="fullname" placeholder="Enter your Full Name" required>
                    </div>

                    <!-- Email -->
                    <div class="col-md-12 mb-3">
                        <input type="email" class="form-control" value="{{ request.user.email }}" name="email" placeholder="Enter your Email" readonly required>
                    </div>

                    <!-- Phone -->
                    <div class="col-md-12 mb-3">
                        <input type="tel" class="form-control" name="phone" value="{{ request.user.username }}" placeholder="Enter your Phone Number" readonly required>
                    </div>

                    <!-- Date of Birth (dob) -->
                    <div class="col-md-12 mb-3">
                        <label for="dob">Date of Birth</label>
                        <input type="date" class="form-control" id="dob" name="dob" placeholder="Date of Birth" required>
                    </div>

                    <!-- Gender -->
                    <div class="col-md-12 mb-3">
                        <select class="form-control" name="gender" required>
                            <option value="" disabled selected>Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <!-- Membership Plan -->
                    <div class="col-md-12 mb-3">
                        <select class="form-control" name="select_membership" required>
                            <option value="" disabled selected>Select Membership Plan</option>
                            {% for membership in memberships %}
                                <option value="{{ membership.id }}">{{ membership.plan }} {{membership.price}}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Trainer -->
                    <div class="col-md-12 mb-3">
                        <select class="form-control" name="trainer" required>
                            <option value="" disabled selected>Select Trainer</option>
                            {% for trainer in trainers %}
                                <option value="{{ trainer.id }}">{{ trainer.name }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Reference -->
                    <div class="col-md-12 mb-3">
                        <input type="text" class="form-control" name="reference" placeholder="Reference (optional)">
                    </div>

                    <!-- Address -->
                    <div class="col-md-12 mb-3">
                        <textarea class="form-control" name="address" placeholder="Enter your Address" rows="3" required></textarea>
                    </div>

                    <!-- Emergency Contact -->
                    <div class="col-md-12 mb-3">
                        <input type="tel" class="form-control" name="emergency_contact" placeholder="Enter Emergency Contact Number" required>
                    </div>

                    <div class="col-md-12 text-center">
                        <div class="loading">Loading</div>
                        <div class="error-message"></div>
                        <div class="sent-message">Your enrollment has been submitted. Thank you!</div>

                        <button type="submit" class="btn btn-warning">Enroll</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock head %}
